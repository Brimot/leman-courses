<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Suivi LÃ©man Courses</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  font-family:Arial;
  background:#0B2A44;
  padding:40px;
  color:#fff;
}
.box{
  max-width:520px;
  margin:auto;
  background:#fff;
  color:#0B2A44;
  padding:30px;
  border-radius:14px;
  box-shadow:0 10px 30px rgba(0,0,0,.2);
}
input{
  width:100%;
  padding:12px;
  margin:10px 0;
  border-radius:8px;
  border:1px solid #ccc;
}
button{
  width:100%;
  padding:14px;
  background:#F6B400;
  color:#0B2A44;
  border:none;
  border-radius:8px;
  font-weight:bold;
  cursor:pointer;
}
.result{
  margin-top:20px;
  padding-top:20px;
  border-top:1px solid #ddd;
}
</style>
</head>

<body>
<div class="box">
<h2>ğŸ“¦ Suivi LÃ©man Courses</h2>

<input id="code" placeholder="Ex: LC-001">
<button onclick="search()">ğŸ” Suivre mon colis</button>

<div id="res" class="result"></div>
</div>

<script>
const API = "https://script.google.com/macros/s/AKfycbzbKAYbfHZTfu-Wwde8ruPw7y-9zpBg6zqUfXUlriIKDGVr_CTqKyborO2DLHUkRYE/exec";

function search(){
  const c = document.getElementById("code").value.trim();
  if(!c) return alert("Entrez un code");

  fetch(API + "?code=" + encodeURIComponent(c))
    .then(r=>r.json())
    .then(d=>{
      if(d.error){
        res.innerHTML = "âŒ " + d.error;
        return;
      }

      res.innerHTML = `
      <b>Statut :</b> ${d.statut}<br>
      <b>Ã‰tape :</b> ${d.etape}<br>
      <b>DerniÃ¨re mise Ã  jour :</b> ${d.maj}<br><br>

      <b>Client :</b><br>
      ${d.client.nom}<br>
      ğŸ“ ${d.client.tel}<br>
      âœ‰ï¸ ${d.client.email}<br><br>

      <b>ğŸ“ Prise en charge :</b><br>
      ${d.prise.adresse}<br>
      ${d.prise.npa} ${d.prise.ville}<br>
      â° ${d.prise.heure}<br><br>

      <b>ğŸ Livraison :</b><br>
      ${d.livraison.adresse}<br>
      ${d.livraison.npa} ${d.livraison.ville}<br>
      â° ${d.livraison.heure}<br><br>

      ${d.commentaire ? "<i>"+d.commentaire+"</i>" : ""}
      `;
    })
    .catch(()=>{
      res.innerHTML = "âš ï¸ Erreur de connexion au service.";
    });
}
</script>
</body>
</html>
