<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Estimation â€“ LÃ©man Courses</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  font-family:Arial;
  background:linear-gradient(135deg,#0B2A44,#123B5A);
  margin:0;
  padding:30px;
}

.card{
  max-width:980px;
  margin:auto;
  background:#fff;
  padding:25px;
  border-radius:18px;
  box-shadow:0 15px 40px rgba(0,0,0,.3);
}

h2{text-align:center;color:#0B2A44;margin:0}
.sub{text-align:center;color:#38556e;margin-top:4px}

.trustbar{
  text-align:center;
  font-size:13px;
  color:#0B2A44;
  background:#f2f7fb;
  padding:8px;
  border-radius:8px;
  margin:12px 0;
}

input,select,button{
  width:100%;
  padding:12px;
  margin-top:8px;
  border-radius:10px;
  border:1px solid #ccc;
  font-size:15px;
}

button{
  background:#FDB913;
  color:#000;
  font-weight:bold;
  border:none;
  cursor:pointer;
  box-shadow:0 6px 14px rgba(0,0,0,.25);
}

.section{
  margin-top:22px;
  padding-top:12px;
  border-top:1px solid #eee;
}

.label{font-weight:bold;color:#0B2A44}

.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.grid-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px}
@media(max-width:820px){.grid-2,.grid-3{grid-template-columns:1fr}}

#map{
  width:100%;
  height:280px;
  margin-top:12px;
  border-radius:12px;
  border:1px solid #ddd;
}

.badges{
  display:flex;
  justify-content:center;
  gap:10px;
  margin-top:12px;
}

.badge{
  background:#0B2A44;
  color:#fff;
  padding:8px 14px;
  border-radius:999px;
  font-size:14px;
}

table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border:1px solid #ddd;padding:8px;text-align:center}
th{background:#f5f7fa;color:#0B2A44}

.smallbtn{
  background:#e6eef8;
  color:#0B2A44;
  border:1px solid #cfd9e6;
  font-weight:bold;
  padding:8px;
  border-radius:8px;
}

.pricebox{
  margin-top:16px;
  padding:14px;
  border:1px solid #e6e6e6;
  border-radius:12px;
  background:#fbfcfe;
}

.pricegrid{
  display:grid;
  grid-template-columns:1fr 1fr 1fr;
  text-align:center;
}

.big{font-size:22px;font-weight:bold}

.testimonials{
  margin-top:20px;
  font-size:13px;
  color:#444;
  text-align:center;
}

.whatsapp{
  position:fixed;
  bottom:20px;
  right:20px;
  background:#25D366;
  color:#fff;
  padding:12px 16px;
  border-radius:999px;
  font-weight:bold;
  text-decoration:none;
  box-shadow:0 6px 14px rgba(0,0,0,.3);
}
</style>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB1XwMisUcFm6UwQseU1sUU-n_55uI9AWQ&callback=initMap" async defer></script>


<body>

<form action="https://script.google.com/macros/s/AKfycbxyrSTQETLmwE94AQWwQ3HZ82dOOssy4a72CxBIFS9pdSjWFOMapogQG2j61FPHkdn1/exec"_blank">

<div class="card">

<div style="text-align:center">
<img src="logo.png" height="48">
</div>

<h2>ğŸšš Estimation LÃ©man Courses</h2>
<p class="sub">Calcul automatique Google Maps Â· TVA 8.1 % Â· Min 25 CHF</p>

<div class="trustbar">
â­ Service suisse Â· ğŸ“ Support humain Â· ğŸ”’ DonnÃ©es sÃ©curisÃ©es
</div>

<div class="section">
<div class="label">ğŸ‘¤ CoordonnÃ©es client</div>
<div class="grid-3">
<input name="client" placeholder="Nom / Entreprise" required>
<input name="tel" placeholder="TÃ©lÃ©phone">
<input name="email" placeholder="E-mail" required>
</div>
</div>

<div class="section">
<div class="label">ğŸ“ Prise en charge</div>
<div class="grid-2">
<input id="pc_npa" placeholder="NPA">
<input id="pc_ville" placeholder="Ville">
<input id="pc_rue" placeholder="Rue">
<input id="pc_no" placeholder="NÂ°">
</div>
</div>

<div class="section">
<div class="label">ğŸšš Livraison</div>
<div class="grid-2">
<input id="lv_npa" placeholder="NPA">
<input id="lv_ville" placeholder="Ville">
<input id="lv_rue" placeholder="Rue">
<input id="lv_no" placeholder="NÂ°">
</div>
</div>

<button type="button" onclick="calculerDistance()">Calculer la distance</button>
<div id="map"></div>

<div class="badges">
<div class="badge">Distance: <span id="distance_txt">â€“</span> km</div>
<div class="badge">DurÃ©e: <span id="duree_txt">â€“</span> min</div>
</div>

<div class="section">
<div class="label">ğŸš€ Type de livraison</div>
<select id="service" onchange="recalculer()">
<option value="">â€” Choisir â€”</option>
<option value="urgent">Urgente 4h</option>
<option value="express">Express 12h</option>
<option value="eco">Eco 48h</option>
</select>
</div>

<div class="section">
<div class="label">ğŸ“¦ Colis</div>
<table>
<thead>
<tr><th>#</th><th>Poids</th><th>Dimensions</th><th>Type</th><th></th></tr>
</thead>
<tbody id="colis_table"></tbody>
</table>
<button type="button" class="smallbtn" onclick="ajouterColis()">+ Ajouter colis</button>
</div>

<div class="pricebox">
<div class="pricegrid">
<div>HT<br><span class="big">CHF <span id="prix_ht">â€“</span></span></div>
<div>TVA<br><span class="big">CHF <span id="prix_tva">â€“</span></span></div>
<div><strong>TTC</strong><br><span class="big">CHF <span id="prix_ttc">â€“</span></span></div>
</div>
</div>

<div class="testimonials">
â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸ â€œRapide et fiableâ€ â€“ Pharmacie VD  
<br>
â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸ â€œParfait pour nos urgencesâ€ â€“ Cabinet mÃ©dical
</div>

<button type="submit">Envoyer la demande</button>

</div>
</form>

<a href="https://wa.me/41798700488" target="_blank" class="whatsapp">
ğŸ’¬ Besoin dâ€™aide ?
</a>

<script>
let map, ds, dr, km=0, duree=0;
let colis=[];

function initMap(){
  map = new google.maps.Map(document.getElementById("map"), {
    center:{lat:46.8,lng:8.3}, zoom:7
  });
  ds = new google.maps.DirectionsService();
  dr = new google.maps.DirectionsRenderer({map});
}

function adresse(p){
  return document.getElementById(p+"_rue").value+" "+
         document.getElementById(p+"_no").value+", "+
         document.getElementById(p+"_npa").value+" "+
         document.getElementById(p+"_ville").value;
}

function calculerDistance(){
  ds.route({
    origin: adresse("pc"),
    destination: adresse("lv"),
    travelMode:"DRIVING"
  },(r,s)=>{
    if(s=="OK"){
      dr.setDirections(r);
      km = r.routes[0].legs[0].distance.value/1000;
      duree = Math.ceil(r.routes[0].legs[0].duration.value/60);
      distance_txt.innerText = km.toFixed(1);
      duree_txt.innerText = duree;
      recalculer();
    }
  });
}

function ajouterColis(){
  colis.push({id:Date.now(), poids:1});
  renderColis();
}

function renderColis(){
  colis_table.innerHTML="";
  colis.forEach((c,i)=>{
    colis_table.innerHTML += `
<tr>
<td>${i+1}</td>
<td><input type="number" value="${c.poids}"></td>
<td>30x20x10</td>
<td>Standard</td>
<td>${i?'<button onclick="supprimerColis('+c.id+')">âŒ</button>':'â€”'}</td>
</tr>`;
  });
}

function supprimerColis(id){
  colis = colis.filter(c=>c.id!==id);
  renderColis();
}

function recalculer(){
  let ht = Math.max(25, km*1.2);
  let tva = ht*0.081;
  let ttc = ht+tva;
  prix_ht.innerText = ht.toFixed(2);
  prix_tva.innerText = tva.toFixed(2);
  prix_ttc.innerText = ttc.toFixed(2);
}

ajouterColis();
</script>

</body>
</html>
